scene.onOverlapTile(SpriteKind.Player, myTiles.tile2, function (sprite, location) {
    if (controller.A.isPressed()) {
        gra = gra==1?0:1
tiles.setTileAt(location, myTiles.transparency16)
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (spider.isHittingTile(CollisionDirection.Top) || spider.isHittingTile(CollisionDirection.Bottom)) {
        gra = gra==1?0:1
IsOnWall = 1
        timer.after(100, function () {
            IsOnWall = 0
        })
    }
})
function Pass () {
    level[0] = level[0] + 1
    game.splash("You tried " + (0 - info.score()) + " times")
    info.player1.setScore(0)
}
function playBgm () {
    timer.background(function () {
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.playTone(415, music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.playTone(415, music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(659, music.beat(BeatFraction.Half))
        music.playTone(494, music.beat(BeatFraction.Whole))
        music.playTone(494, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(494, music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.playTone(494, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(554, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(587, music.beat(BeatFraction.Half))
        music.playTone(554, music.beat(BeatFraction.Half))
        music.playTone(440, music.beat(BeatFraction.Whole))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.playTone(415, music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.playTone(415, music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.rest(music.beat(BeatFraction.Quarter))
        music.playTone(330, music.beat(BeatFraction.Half))
        music.playTone(330, music.beat(BeatFraction.Half))
        music.playTone(415, music.beat(BeatFraction.Half))
        music.playTone(494, music.beat(BeatFraction.Whole))
        music.playTone(554, music.beat(BeatFraction.Quarter))
        music.playTone(494, music.beat(BeatFraction.Quarter))
        music.playTone(440, music.beat(BeatFraction.Quarter))
        music.playTone(494, music.beat(BeatFraction.Quarter))
        music.playTone(494, music.beat(BeatFraction.Half))
        music.playTone(440, music.beat(BeatFraction.Whole))
        music.rest(music.beat(BeatFraction.Half))
        playBgm()
    })
}
function Retry () {
    level[0] = 0
    info.changeScoreBy(-1)
    music.baDing.play()
    pause(500)
}
let IsOnWall = 0
let spider: Sprite = null
let level: number[] = []
let gra = 0
let ani_of_spider = 0
level = [0, 0]
spider = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . f f f f f f f f f f f f . 
    . . . f 2 2 2 4 4 f f 2 2 4 f . 
    . . . . f 2 2 4 f 7 7 f 2 f . . 
    . . . . . f 2 4 f 7 7 f 2 f . . 
    . . . . f f 2 4 4 f f 2 f . . . 
    . . f f 2 2 f 4 4 4 2 2 f . . . 
    . f 4 4 f f 2 4 4 4 2 f . . . . 
    f 2 4 f 2 2 f 4 4 4 f 2 f f . . 
    f 2 4 f 2 2 f f f f 2 2 2 4 f . 
    f 2 f 4 2 2 f f 4 4 f f 2 4 f . 
    f 2 f 4 2 f . f 4 4 f . f 4 f . 
    f f 4 4 2 f . f 4 4 f . f 4 f . 
    . . f f f . . . f f . . . f . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
info.setScore(0)
playBgm()
game.onUpdate(function () {
    if (level[0] == 0) {
        tiles.setTilemap(tilemap`level_2`)
        gra = 0
        spider.setPosition(2, 230)
        level[0] = level[0] + 1
    } else if (level[0] == 2) {
        tiles.setTilemap(tilemap`level_3`)
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ..........88888888.......................................................88888..................................................................................
            ...8888..888888888...888................................................888888..................................................................................
            ...888888888888888...888................................................888888..................................................................................
            ...88888888888888....888................................................8888....................................................................................
            .....888888888888....888................................................888.....................................................................................
            ........8888.........888...............88888.....8888...................888.....................................................................................
            ........888..........888.............88888888....8888...................8888.......88888888....888..888888......................................................
            ........888..........888888888......8888888888..88888...................888888888..8888888888..88888888888......................................................
            ........888.........88888888888.....8888888888888888...............88888888888888..8888888888..88888888888......................................................
            ........888.........88888888888.....888....88888888................88888888888888..888...8888...8888888.................66666...................................
            ........888.........888888.8888.............888888.................888888888.......888....888...88888...................66666...................................
            ........888.........8888....888.............88888........................8888......888....888....8888...................66666...................................
            ........888.........8888....8888...........888888...............6666666..8888......888...8888....888............................................................
            .......8888........8888.....8888..........8888888...............6666666...888......8888.88888....888...............................................6666.........
            .......8888........8888.....88888.........8888888...............6666666...8888.....888888888.....888...............................66666.........66666666.......
            .......888.........8888......8888........88888888888............666.6666..8888.....888888888.....888.............................6666666........6666666666......
            ...................8888......8888.......88888.888888............666.6666..8888......8888888......888......................666...66666666.......66666666666......
            ........................................8888...88888............666.6666...888...........................................6666..666666666......6666666.6666......
            ........................................888....88888............666..666...888..................................666......6666.66666..6666....6666666..6666......
            ........................................888.....................666..666888888...........................666...6666......6666.6666...6666....666666...6666......
            ................................................................666..666888888...........................666..66666......666666666....666...6666666...666.......
            ................................................................666..6668888886666666.........666........666.666666.....666666666.....666...666666...6666.......
            ......................................................666666....666..666....666666666666......666........6666666666.....66666666......666...66666....6666.......
            ...................................................6666666666...666.6666...6666666666666.....6666.......66666666666....666666666.....6666..666666....6666.......
            ..................................................66666666666...666.6666..66666666666666.....6666.......66666666666....66666666......6666..666666...66666...6666
            .................................................6666666.6666...666.666...666666....6666....6666.......66666666666.....6666666.......6666.666666...666666.666666
            .................................................66666....666...6666666..666666....66666....6666......66666666.666....66666666.......666..6666666666666666666666
            ..............................................66666666....666...6666666..666666....66666....6666......6666666..666...66666666........66666666666666666666666666.
            ..............................................66666666....666...666666...66666.....66666...66666.....66666666..666...66666666........6666666666666666.666666....
            ..............................................66666666....666...666666..666666.....6666....66666....66666666...666..666666666........66666666........666666.....
            ...................................................666....666...66666...66666......6666...666666....6666666....666666666.6666.........666666........666666......
            ...................................................666....666...66666.6666666.....66666..66666666.666666666....66666666..6666......................666666.......
            ...................................................666....666..6666666666666.....666666..666666666666666666....66666666..666......................666666........
            ...................................................666....666666666666666666....6666666666666.6666666666666....66666..............................666666........
            ...................................................666....666666666666666666..66666666666666..666666666666.......................................6666666........
            ...................................................666....6666666.66666666666666666.6666666...6666..666666......................................66666666........
            ...................................................666.....66666.........6666666666..66666.........6666666.....................................66666666.........
            ...................................................666....................666666..................66666666....................................666666666.........
            ...................................................666...........................................66666.666...................................66666.666..........
            ...................................................666..........................................666666.666...................................66666.666..........
            ...................................................666.........................................666666..666..................................6666...666..........
            ...................................................666........................................666666..6666..................................6666...666..........
            ...................................................666........................................66666...6666.................................6666....666..........
            ..................................................6666........................................6666....6666.................................6666....666..........
            ..................................................6666........................................666....6666..................................666....6666..........
            ..................................................666.........................................666...66666..................................666....6666..........
            .................................................6666.........................................66666666666..................................6666.666666..........
            ............................................666.66666.........................................6666666666...................................6666666666...........
            ............................................666666666.........................................66666666......................................666666666...........
            ............................................6666666..........................................................................................666666.............
            ............................................666666..............................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ......................................................b.........................................................................................................
            ......................................................b.........................................................................................................
            ......................................................b.........................................................................................................
            ......................................................b.........................................................................................................
            ......................................................b.........................................................................................................
            ......................................................bbbbb.b...b.......bbbbbbbbbbbbbbbbbb......................................................................
            ......................................................b...b.b...b......b....bbbbb........bbbbbbbbbbb............................................................
            ......................................................b...b.b...b..........bb...b......bbb.b.......bbb..........................................................
            ......................................................b...b.b...b..........b...bb.....bb...b..........bbbb..........bb.bbb......................................
            ......................................................bbbbb.bbbbb..........bbbb.......bbbbbb...................bbbb.............................................
            ................................................................b...............................................................................................
            ................................................................b...............................................................................................
            ............................................................bbbbb...............................................................................................
            `)
        Pass()
    }
})
game.onUpdate(function () {
    scene.centerCameraAt(spider.x, spider.y)
    spider.vx = 110
    if (IsOnWall == 0) {
        if (gra == 0) {
            spider.vy = 130
        } else {
            spider.vy = -150
        }
    } else {
        if (gra == 0) {
            spider.vy = 9999
        } else {
            spider.vy = -9999
        }
    }
})
game.onUpdateInterval(100, function () {
    ani_of_spider = ani_of_spider==0?1:0
if (gra == 0) {
        if (ani_of_spider == 0) {
            spider.setImage(img`
                . . . . . . . . . . . . . . . . 
                . . . f f f f f f f f f f f f . 
                . . . f 2 2 2 4 4 f f 2 2 4 f . 
                . . . . f 2 2 4 f 7 7 f 2 f . . 
                . . . . . f 2 4 f 7 7 f 2 f . . 
                . . . . f f 2 4 4 f f 2 f . . . 
                . . f f 2 2 f 4 4 4 2 2 f . . . 
                . f 4 4 f f 2 4 4 4 2 f . . . . 
                f 2 4 f 2 2 f 4 4 4 f 2 f f . . 
                f 2 4 f 2 2 f f f f 2 2 2 4 f . 
                f 2 f 4 2 2 f f 4 4 f f 2 4 f . 
                f 2 f 4 2 f . f 4 4 f . f 4 f . 
                f f 4 4 2 f . f 4 4 f . f 4 f . 
                . . f f f . . . f f . . . f . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `)
        } else {
            spider.setImage(img`
                . . . . . . . . . . . . . . . . 
                . . . f f f f f f f f f f f f . 
                . . . f 2 2 2 4 4 f f 2 2 4 f . 
                . . . . f 2 2 4 f 7 7 f 2 f . . 
                . . . . . f 2 4 f 7 7 f 2 f . . 
                . . . . f f 2 4 4 f f 2 f . . . 
                . . f f 2 2 f 4 4 4 2 2 f . . . 
                . f 2 4 f f 2 4 4 4 2 f . . . . 
                . f 2 4 2 2 f 4 4 4 f 2 f f . . 
                . f 4 f 2 2 f f f f 2 2 2 4 f . 
                f 2 4 f 2 2 f . f 4 2 f 2 4 4 f 
                f f f f 2 f . . f 4 2 f f 2 4 f 
                . f f 4 2 f . . f 4 2 f . f f . 
                . . f f f . . . . f f . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `)
        }
    } else {
        if (ani_of_spider == 0) {
            spider.setImage(img`
                . . . . . . . . . . . . . . . . 
                . . f f f . . . f f . . . f . . 
                f f 4 4 2 f . f 4 4 f . f 4 f . 
                f 2 f 4 2 f . f 4 4 f . f 4 f . 
                f 2 f 4 2 2 f f 4 4 f f 2 4 f . 
                2 4 f 2 2 f f f f 2 2 2 4 f . . 
                f 2 4 f 2 2 f 4 4 4 f 2 f f . . 
                . f 4 4 f f 2 4 4 4 2 f . . . . 
                . . f f 2 2 f 4 4 4 2 2 f . . . 
                . . . . f f 2 4 4 f f 2 f . . . 
                . . . . . f 2 4 f 7 7 f 2 f . . 
                . . . . f 2 2 4 f 7 7 f 2 f . . 
                . . . f 2 2 2 4 4 f f 2 2 4 f . 
                . . . f f f f f f f f f f f f . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `)
        } else {
            spider.setImage(img`
                . . . . . . . . . . . . . . . . 
                . . . f f . . . . f f . . . . . 
                . . f 4 2 f . . f 4 4 f . f f . 
                f f f f 2 f . f f 4 2 f f 2 4 f 
                f 4 4 f 2 f . f 4 4 2 f 2 4 4 f 
                2 4 4 f 2 f . f f 2 2 f 4 4 f . 
                f 2 4 4 f f f 4 4 4 f 2 f f . . 
                f f 2 4 f f 2 4 4 4 2 f . . . . 
                . . f f 2 2 f 4 4 4 2 2 f . . . 
                . . . . f f 2 4 4 f f 2 f . . . 
                . . . . . f 2 4 f 7 7 f 2 f . . 
                . . . . f 2 2 4 f 7 7 f 2 f . . 
                . . . f 2 2 2 4 4 f f 2 2 4 f . 
                . . . f f f f f f f f f f f f . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `)
        }
    }
    if (spider.isHittingTile(CollisionDirection.Right) || (spider.y <= 24 || spider.y >= 1000) || (tiles.tileAtLocationEquals(tiles.getTileLocation(spider.x / 16, spider.y / 16), myTiles.tile3) || tiles.tileAtLocationEquals(tiles.getTileLocation(spider.x / 16, spider.y / 16), myTiles.tile4))) {
        Retry()
    }
    if (tiles.tileAtLocationEquals(tiles.getTileLocation(spider.x / 16, spider.y / 16), myTiles.tile5) || tiles.tileAtLocationEquals(tiles.getTileLocation(spider.x / 16, spider.y / 16), myTiles.tile6) || (tiles.tileAtLocationEquals(tiles.getTileLocation(spider.x / 16, spider.y / 16), myTiles.tile7) || tiles.tileAtLocationEquals(tiles.getTileLocation(spider.x / 16, spider.y / 16), myTiles.tile8))) {
        Pass()
    }
})
game.onUpdateInterval(300, function () {
    spider.startEffect(effects.fire, 300)
})
